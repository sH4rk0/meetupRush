var __extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},MUR;!function(t){var e=function(e){function a(){e.call(this)}return __extends(a,e),a.prototype.preload=function(){},a.prototype.create=function(){this.players=new Array,this.game.world.setBounds(0,0,1024,600),this.menuBg=this.game.add.tileSprite(0,0,1024,600,"menu-background"),this.menuBg.fixedToCamera=!0,this.game.add.sprite(0,0,"menu-trasparency");var e=this.game.add.sprite(this.game.world.centerX,10,"meetup-big");e.scale.set(.75),e.anchor.set(.5,0),e.alpha=0,this.game.add.tween(e).to({alpha:1},1e3,Phaser.Easing.Quadratic.In,!0,300);var a=this.game.add.sprite(0,330,this.game.cache.getBitmapData("band"));a.alpha=0,this.game.add.tween(a).to({alpha:.3},1e3,Phaser.Easing.Quadratic.In,!0,0);var s=this.game.add.sprite(0,440,this.game.cache.getBitmapData("band2"));s.alpha=0,this.game.add.tween(s).to({alpha:.3},1e3,Phaser.Easing.Quadratic.In,!0,0);var i={font:"normal 50px",fill:"#ffffff",stroke:"#000000",strokeThickness:5},n=this.game.add.text(0,160,"RUSH",i);n.alpha=0,n.font="Press Start 2P",this.game.add.tween(n).to({alpha:1,x:520},1e3,Phaser.Easing.Bounce.Out,!0,1e3),i={font:"normal 20px",fill:"#ffffff",stroke:"#000000",strokeThickness:0};var r=this.game.add.text(335,275,"Choose your avatar",i);r.setShadow(1,1,"rgba(0,0,0,0.75)",2),r.font="Press Start 2P",r.alpha=1;var o=this.game.add.text(10,10,"logout",i);o.alpha=1,o.setShadow(1,1,"rgba(0,0,0,0.75)",2),o.font="Press Start 2P",o.inputEnabled=!0,o.events.onInputDown.add(function(){t.logout(this.game)},this);var h=[[[0,1,2,3,4,5,6,7],[8,9,10,11,12,13]],[[14,15,16,17,18,19,20,21],[22,23,24,25,26,27]],[[28,29,30,31,32,33,34,35],[36,37,38,39]],[[42,43,44,45,46,47,48,49],[50,51,52,53]]],d=[150,350,550,750];this.avatarsGroup=this.game.add.group();for(var l=0;l<4;l++)this.players.push(this.game.add.sprite(d[l],330,"players")),this.players[l].scale.set(2),this.players[l].animations.add("idle",h[l][1],8,!0),this.players[l].animations.add("run",h[l][0],12,!0),this.players[l].play("idle"),this.players[l].inputEnabled=!0,this.players[l].alpha=0,this.players[l].angle=l,this.game.add.tween(this.players[l]).to({alpha:.5},1e3,Phaser.Easing.Quadratic.In,!0,300*l),this.players[l].events.onInputDown.add(function(e){this.setPlayerAlpha(),e.alpha=1,e.play("run"),t.setAvatar(e.angle),this.startBtn.alpha=1,this.startBtn.inputEnabled=!0},this),this.avatarsGroup.add(this.players[l]);this.startBtn=this.game.add.sprite(512,550,this.game.cache.getBitmapData("startBtn")),this.startBtn.anchor.setTo(.5);var p=this.game.add.text(0,0,"PLAY",{fill:"#ffffff"});this.startBtn.alpha=.5,p.anchor.set(.5),this.startBtn.addChild(p),this.startBtn.inputEnabled=!1,this.startBtn.events.onInputDown.add(function(){t.getFbInstance().removeAllWinners(),t.getFbInstance().setWinner(0),t.goState("Game",this.game)},this),this.aboutBtn=this.game.add.sprite(994,30,"about-btn"),this.aboutBtn.anchor.setTo(.5),this.aboutBtn.inputEnabled=!0,this.aboutBtn.events.onInputDown.add(function(){t.goState("MenuAbout",this.game)},this),this.settingsBtn=this.game.add.sprite(950,30,"settings-btn"),this.settingsBtn.anchor.setTo(.5),this.settingsBtn.inputEnabled=!0,this.settingsBtn.events.onInputDown.add(function(){t.goState("MenuSettings",this.game)},this)},a.prototype.update=function(){t.isGameReset()&&t.resetAll(),this.menuBg.tilePosition.x-=.5},a.prototype.setPlayerAlpha=function(){for(var t=0;t<4;t++)this.players[t].alpha=.5,this.players[t].play("idle")},a}(Phaser.State);t.Menu=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(e){function a(){e.apply(this,arguments)}return __extends(a,e),a.prototype.update=function(){t.isGameReset()&&t.resetAll()},a.prototype.preload=function(){this.game.load.onLoadStart.add(function(){},this),this.game.load.onFileComplete.add(this.fileComplete,this),this.game.load.onLoadComplete.add(function(){this.loadingBar.visible=!1,this.loadingPerc.visible=!1,this.startBtn.visible=!0},this),this.startBtn=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,this.game.cache.getBitmapData("startBtn")),this.startBtn.anchor.setTo(.5);var e=this.game.add.text(0,0,"START",{fill:"#ffffff"});e.anchor.set(.5),this.startBtn.addChild(e),this.startBtn.inputEnabled=!0,this.startBtn.events.onInputDown.add(function(){t.goState("Menu",this.game)},this),this.startBtn.visible=!1,this.game.load.script("webfont","http://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),this.loadingBar=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,this.game.cache.getBitmapData("loadingBar")),this.loadingBar.anchor.setTo(.5),this.loadingPerc=this.game.add.text(0,0,"0%",{wordWrap:!0,wordWrapWidth:this.loadingBar.width,fill:"#ffffff",stroke:"#ff0000",strokeThickness:5}),this.loadingPerc.anchor.set(.5),this.loadingBar.addChild(this.loadingPerc),this.game.load.setPreloadSprite(this.loadingBar);for(var a=0;a<gameData.assets.images.length;a++)this.game.load.image(gameData.assets.images[a].name,gameData.assets.images[a].path);for(var a=0;a<gameData.assets.spritesheets.length;a++)this.game.load.spritesheet(gameData.assets.spritesheets[a].name,gameData.assets.spritesheets[a].path,gameData.assets.spritesheets[a].width,gameData.assets.spritesheets[a].height,gameData.assets.spritesheets[a].frames);for(var a=0;a<gameData.assets.bitmapfont.length;a++)this.game.load.bitmapFont(gameData.assets.bitmapfont[a].name,gameData.assets.bitmapfont[a].imgpath,gameData.assets.bitmapfont[a].xmlpath);for(var a=0;a<gameData.assets.sounds.length;a++)this.game.load.audio(gameData.assets.sounds[a].name,gameData.assets.sounds[a].paths)},a.prototype.fileComplete=function(t,e,a,s,i){this.loadingPerc.text=t+"%"},a}(Phaser.State);t.Preloader=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(e){function a(){e.apply(this,arguments)}return __extends(a,e),a.prototype.preload=function(){var t=this.game.add.bitmapData(200,50);t.ctx.fillStyle="#ed1c40",t.ctx.beginPath(),t.ctx.rect(0,0,200,50),t.ctx.fill(),this.game.cache.addBitmapData("loadingBar",t),t=this.game.add.bitmapData(200,200),t.ctx.beginPath(),t.ctx.fillStyle="#FFFFFF",t.ctx.strokeStyle="#FFF",t.ctx.lineWidth=20,t.ctx.arc(t.width/2,t.height/2,50,0,2*Math.PI),t.ctx.closePath(),t.ctx.fill(),t.ctx.stroke(),this.game.cache.addBitmapData("circleBtn",t),t=this.game.add.bitmapData(200,50),t.ctx.fillStyle="#ed1c40",t.ctx.beginPath(),t.ctx.rect(0,0,200,50),t.ctx.fill(),this.game.cache.addBitmapData("startBtn",t),t=this.game.add.bitmapData(200,50),t.ctx.fillStyle="#ed1c40",t.ctx.beginPath(),t.ctx.rect(0,0,200,50),t.ctx.fill(),this.game.cache.addBitmapData("button",t),t=this.game.add.bitmapData(1024,150),t.ctx.fillStyle="#ed1c40",t.ctx.beginPath(),t.ctx.rect(0,0,1024,150),t.ctx.fill(),this.game.cache.addBitmapData("band",t),t=this.game.add.bitmapData(1024,40),t.ctx.fillStyle="#ed1c40",t.ctx.beginPath(),t.ctx.rect(0,0,1024,40),t.ctx.fill(),this.game.cache.addBitmapData("band2",t),t=this.game.add.bitmapData(20,189),t.ctx.fillStyle="#ffffff",t.ctx.beginPath(),t.ctx.rect(0,0,20,189),t.ctx.fill(),this.game.cache.addBitmapData("goal",t)},a.prototype.create=function(){this.game.stage.backgroundColor="#000000";var e=!!t.getUrlParameter("stillFocus");this.game.stage.disableVisibilityChange=e,this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.stage.smoothed=!1,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.state.start("Preloader")},a}(Phaser.State);t.Boot=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(e){function a(){e.call(this)}return __extends(a,e),a.prototype.preload=function(){},a.prototype.create=function(){this.menuBg=this.game.add.tileSprite(0,0,1024,600,"menu-background"),this.game.add.sprite(0,0,"menu-trasparency");var e={font:"normal 50px",fill:"#ffffff",stroke:"#000000",strokeThickness:5},a=this.game.add.text(this.game.world.centerX,75,"ABOUT",e);a.font="Press Start 2P",a.anchor.set(.5),e={font:"normal 18px",fill:"#ffffff",stroke:"#000000",strokeThickness:0};var s=this.game.add.text(this.game.world.centerX,160,"This game was made using the following technologies",e);s.font="Press Start 2P",s.anchor.set(.5);var i=this.game.add.sprite(0,0,"logo-meetup");i.anchor.set(0);var n=this.game.add.sprite(150,0,"logo-js");n.anchor.set(0);var r=this.game.add.sprite(300,0,"logo-firebase");r.anchor.set(0);var o=this.game.add.sprite(450,0,"logo-typescript");o.anchor.set(0);var h=this.game.add.sprite(600,0,"logo-vscode");h.anchor.set(0);var d=this.game.add.sprite(750,0,"logo-phaser");d.anchor.set(0),this.logoGroup=this.game.add.group(),this.logoGroup.addMultiple([i,n,r,o,h,d]),this.logoGroup.y=250,this.logoGroup.x=80,this.backBtn=this.game.add.sprite(this.game.world.centerX,550,this.game.cache.getBitmapData("startBtn")),this.backBtn.anchor.setTo(.5);var l=this.game.add.text(0,0,"BACK",{fill:"#ffffff"});l.anchor.set(.5),this.backBtn.addChild(l),this.backBtn.inputEnabled=!0,this.backBtn.events.onInputDown.add(function(){t.goState("Menu",this.game)},this)},a.prototype.update=function(){t.isGameReset()&&t.resetAll(),this.menuBg.tilePosition.x-=.5},a}(Phaser.State);t.MenuAbout=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(e){function a(){e.call(this),this.readyOnce=!0,this.readyOnceEnd=!0,this.currentPlayerExist=!1,this.goal=settings.goalDistance}return __extends(a,e),a.prototype.preload=function(){},a.prototype.create=function(){this.startX=this.game.rnd.integerInRange(50,60),this.startY=this.game.rnd.integerInRange(320,440),this.game.world.setBounds(0,0,this.goal,600),this.playerObj=t.getPlayerObj(),t.setGameState(this),t.setGameStarted(!0),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.backGroup=this.game.add.group(),this.introSky=this.game.add.tileSprite(0,-50,1024,650,"introSky"),this.introSky.fixedToCamera=!0,this.introCloud1=this.game.add.tileSprite(0,0,1024,300,"cloud1"),this.introCloud1.fixedToCamera=!0,this.introCloud1.tilePosition.x=0,this.introCloud2=this.game.add.tileSprite(0,0,1024,300,"cloud2"),this.introCloud2.fixedToCamera=!0,this.introCloud2.tilePosition.x=0,this.introRocks=this.game.add.tileSprite(0,298,1024,96,"introRocks"),this.introRocks.fixedToCamera=!0;var e=this.game.add.sprite(this.goal-100,411,this.game.cache.getBitmapData("goal"));e.alpha=.5,this.introRoad=this.game.add.tileSprite(0,331,2e4,269,"introRoad"),this.introRoad.fixedToCamera=!1,this.backGroup.addMultiple([this.introSky,this.introCloud1,this.introCloud2,this.introRocks,this.introRoad,e]);var a={font:"normal 30px",fill:"#ffffff",stroke:"#1d5779",strokeThickness:5},s=this.game.add.text(10,10,this.playerObj.name,a);s.font="Press Start 2P",s.fixedToCamera=!0,a={font:"normal 56px",fill:"#ffff00",stroke:"#fd8708",strokeThickness:10},this.readyText=this.game.add.text(530,this.game.world.centerY,"GET READY!",a),this.readyText.font="Press Start 2P",this.readyText.anchor.set(.5),this.readyText.alpha=0,this.game.add.tween(this.readyText).to({alpha:1},500,Phaser.Easing.Quadratic.In,!0,300),this.playerGroup=this.game.add.group();var i=Phaser.Timer.MINUTE*settings.timer.minute+Phaser.Timer.SECOND*settings.timer.second,n=60*settings.timer.minute+settings.timer.second;a={font:"normal 56px",fill:"#ffffff",stroke:"#0000ff",strokeThickness:10},this.timerText=this.game.add.text(700,50,this.formatTime(n),a),this.timerText.font="Press Start 2P",this.timerText.fixedToCamera=!0,this.playerTimer=this.game.time.create(),this.timerEvent=this.playerTimer.add(i,this.gameOver,this),t.getFbInstance().setUserData(this.playerObj.id,{active:!0,id:this.playerObj.id,name:this.playerObj.name,x:this.startX,y:this.startY,avatar:t.getAvatar()}),t.getFbInstance().getAll()},a.prototype.update=function(){t.isGameReset()&&t.resetAll(),this.introCloud1.tilePosition.x-=.27,this.introCloud2.tilePosition.x-=.13,t.getStartRun()&&this.readyOnce&&(this.playerTimer.start(),this.readyOnce=!1,this.playerTimer.start(),this.readyText.text="GO!!!!",this.readyText.fill="#00ff00",this.readyText.stroke="#1d9a00",this.game.add.tween(this.readyText).to({alpha:0},1e3,Phaser.Easing.Quadratic.In,!0,1e3),void 0!=this.startBtn&&this.startBtn.destroy()),this.playerTimer.running&&(this.timerText.text=this.formatTime(Math.round((this.timerEvent.delay-this.playerTimer.ms)/1e3)))},a.prototype.formatTime=function(t){var e="0"+Math.floor(t/60),a="0"+(t-60*e);return e.substr(-2)+":"+a.substr(-2)},a.prototype.gameOver=function(){console.log("game over");var e=this.playerTimer.ms;this.playerTimer.stop(),t.getFbInstance().setWinners(this.playerObj.id,{id:this.playerObj.id,time:e}),this.currentPlayerExist=!1,this.readyOnceEnd=!0,this.readyOnce=!0,this.startBtn=void 0,t.goState("GameOver",this.game)},a.prototype.addStartBtn=function(){return},a.prototype.render=function(){},a.prototype.manageData=function(e){if(e.id!==this.player.id){var a=this.playerGroup.iterate("id",e.id,2);a.anim[t.PlayerStates.IDLE].stop(),a.anim[t.PlayerStates.RUNNING].next(1),a.currentState=t.PlayerStates.RUNNING,a.x=e.x,a.checkIdle(this.game)}},a.prototype.addPlayer=function(e){if(e.active){var a=t.getPlayerId();if(e.id==a)this.currentPlayerExist||(this.currentPlayerExist=!0,this.player=new t.Player(this.game,this,e.id,e.name,!0,this.startX,this.startY,t.getAvatar()),this.game.camera.follow(this.player),this.playerGroup.add(this.player),void 0==this.startBtn&&this.addStartBtn());else{var s=new t.Player(this.game,this,e.id,e.name,!1,e.x,e.y,e.avatar);this.playerGroup.add(s),void 0==this.startBtn&&this.addStartBtn()}this.resortGroup()}},a.prototype.addPlayers=function(e){if(e.active){var a=t.getPlayerId();if(e.id==a)this.currentPlayerExist||(console.log("add Players c",e),this.player=new t.Player(this.game,this,e.id,e.name,!0,this.startX,this.startY,t.getAvatar()),this.game.camera.follow(this.player),this.currentPlayerExist=!0,this.playerGroup.add(this.player),void 0==this.startBtn&&this.addStartBtn());else{var s=new t.Player(this.game,this,e.id,e.name,!1,e.x,e.y,e.avatar);this.playerGroup.add(s),void 0==this.startBtn&&this.addStartBtn()}this.resortGroup()}},a.prototype.resortGroup=function(){this.playerGroup.customSort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:0},this)},a}(Phaser.State);t.GameState=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(e){function a(){e.call(this)}return __extends(a,e),a.prototype.create=function(){t.setGameOver(this),t.setGameState(null),t.getFbInstance().getWinners(),t.getFbInstance().removeUser(t.getPlayerId()),this.game.world.setBounds(0,0,1024,600),this.game.add.tileSprite(0,0,1024,600,"menu-background"),this.game.add.sprite(0,0,"menu-trasparency");var e=this.game.add.sprite(512,550,this.game.cache.getBitmapData("startBtn"));e.anchor.setTo(.5),e.alpha=0;var a=this.game.add.text(0,0,"RE-PLAY",{fill:"#ffffff"});a.anchor.set(.5),e.addChild(a),e.events.onInputDown.add(function(){t.setGameOver(null),t.goState("Menu",this.game)},this);var s=this.game.add.tween(e).to({alpha:1},1e3,Phaser.Easing.Quadratic.In,!0,300);s.onComplete.add(function(){e.inputEnabled=!0},e)},a.prototype.setResult=function(t){var e,a="";t<=settings.winners?(e={font:"normal 56px",fill:"#00ff00",stroke:"#ffffff",strokeThickness:10},a="You win!"):(e={font:"normal 56px",fill:"#ff0000",stroke:"#ffffff",strokeThickness:10},a="You Lose!");var s=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY+100,settings.winnersAwards[t-1]);s.anchor.setTo(.5),s.alpha=0,this.game.add.tween(s).to({alpha:1,y:this.game.world.centerY},500,Phaser.Easing.Bounce.Out,!0,500);var i=this.game.add.text(this.game.world.centerX,this.game.world.centerY-100,a,e);i.fixedToCamera=!1,i.alpha=0,i.font="Press Start 2P",i.anchor.set(.5),this.game.add.tween(i).to({alpha:1},500,Phaser.Easing.Quadratic.In,!0,500)},a.prototype.update=function(){t.isGameReset()&&t.resetAll()},a}(Phaser.State);t.GameOver=e}(MUR||(MUR={}));var MUR;!function(t){function e(t){L=t}function a(){return L}function s(t){E=t}function i(){return E}function n(t){X=t}function r(){return X}function o(t){N=t}function h(){return N}function d(t){F=t}function l(){return F}function p(t){j=t}function m(){return j}function g(t){W=t}function c(){return W}function f(){a().rsvpListContainerShow()}function u(){a().rsvpListHide()}function y(t){var e,a,s=decodeURIComponent(window.location.search.substring(1)),i=s.split("&");for(a=0;a<i.length;a++)if(e=i[a].split("="),e[0]===t)return void 0===e[1]||e[1]}function v(t,e){var a=e.plugins.add(Phaser.Plugin.StateTransition);a.configure({duration:1e3,ease:Phaser.Easing.Exponential.InOut,properties:{alpha:0,scale:{x:1.5,y:1.5}}}),a.to(t)}function b(t){Y=t}function S(){return Y}function x(t){_=t}function P(){return _}function w(t){C=t}function R(){return C}function B(t){A=t}function I(){return A}function k(){return O}function D(t){O=t}function G(){var e,s=_;return a().getrsvpData().forEach(function(a){a.id===s&&(e=new t.rsvp(a.id,a.name,a.image))}),e}function T(e){localStorage.removeItem("mrLogged"),k().logout(t.getPlayerId()),a().rsvpListShow(),v("Preloader",e)}function U(t){localStorage.setItem("mrLogged",JSON.stringify({id:t})),k().logUser(t,{id:t}),x(t),u()}function M(){localStorage.removeItem("mrLogged"),k().resetGame(),k().removeAllLogged(),window.location.reload()}var E,L,C,A,O,_=0,F=!1,N=!1,j=!1,W=0,Y=0,X=!1;t.setListObj=e,t.getListObj=a,t.setGameObj=s,t.getGameObj=i,t.setReset=n,t.isGameReset=r,t.setGameEnded=o,t.isGameEnded=h,t.setGameStarted=d,t.isGameStarted=l,t.setStartRun=p,t.getStartRun=m,t.setWinner=g,t.getWinner=c,t.showMemebers=f,t.hideMemebers=u,t.getUrlParameter=y,t.goState=v,t.setAvatar=b,t.getAvatar=S,t.setPlayerId=x,t.getPlayerId=P,t.setGameState=w,t.getGameState=R,t.setGameOver=B,t.getGameOver=I,t.getFbInstance=k,t.setFbInstance=D,t.getPlayerObj=G,t.logout=T,t.login=U,t.resetAll=M,window.onresize=function(){a().getrsvpList().css({width:window.innerWidth,height:window.innerHeight})},window.onload=function(){D(new t.initFb),e(new t.initList),s(new t.initGame(1024,600));var i=localStorage.getItem("mrLogged");null!=i&&(i=JSON.parse(i),x(i.id),a().rsvpListHide())}}(MUR||(MUR={}));var WebFontConfig={active:function(){},google:{families:["Press Start 2P"]}},gameData={assets:{spritesheets:[{name:"players",path:"assets/images/game/players2.png",width:52,height:70,frames:84}],images:[{name:"introSky",path:"assets/images/game/sky.png"},{name:"introRocks",path:"assets/images/game/rocks.png"},{name:"introRoad",path:"assets/images/game/road.png"},{name:"cloud1",path:"assets/images/game/cloud1.png"},{name:"cloud2",path:"assets/images/game/cloud2.png"},{name:"meetup-big",path:"assets/images/game/meetup-big.png"},{name:"logo-meetup",path:"assets/images/game/logo-meetup.png"},{name:"logo-js",path:"assets/images/game/logo-js.png"},{name:"logo-firebase",path:"assets/images/game/logo-firebase.png"},{name:"logo-phaser",path:"assets/images/game/logo-phaser.png"},{name:"logo-typescript",path:"assets/images/game/logo-typescript.png"},{name:"logo-vscode",path:"assets/images/game/logo-vscode.png"},{name:"menu-background",path:"assets/images/game/menu-background.jpg"},{name:"menu-trasparency",path:"assets/images/game/menu-trasparency.png"},{name:"settings-btn",path:"assets/images/game/settings.png"},{name:"about-btn",path:"assets/images/game/about.png"},{name:"medal-gold",path:"assets/images/game/medal-gold.png"},{name:"medal-silver",path:"assets/images/game/medal-silver.png"},{name:"medal-bronze",path:"assets/images/game/medal-bronze.png"}],sounds:[],bitmapfont:[{name:"carrier_command",imgpath:"assets/fonts/carrier_command.png",xmlpath:"assets/fonts/carrier_command.xml"}]}},MUR;!function(t){!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.JUMPING=2]="JUMPING"}(t.PlayerStates||(t.PlayerStates={}));var e=t.PlayerStates,a=function(a){function s(t,s,i,n,r,o,h,d){a.call(this,t,o,h,"players"),this.game=t,this.id=i,this.name=n,this.gameState=s,this.isPlayer=r,this.lastRate=0,this.playerSpeed=0,this.anim=new Array,this.scale.set(2),this.game.physics.arcade.enable(this);var l=[[[0,1,2,3,4,5,6,7],[8,9,10,11,12,13]],[[14,15,16,17,18,19,20,21],[22,23,24,25,26,27]],[[28,29,30,31,32,33,34,35],[36,37,38,39]],[[42,43,44,45,46,47,48,49],[50,51,52,53]]],p=this.animations.add("idle",l[d][1],5+t.rnd.integerInRange(1,3),!0);this.anim.push(p),p=this.animations.add("run",l[d][0],0,!0),this.anim.push(p),this.anim[e.IDLE].play(),this.currentState=e.IDLE,this.isPlayer?(this.alpha=1,this.game.device.touch&&(this.game.device.iOS||this.game.device.android||this.game.device.windowsPhone)?(this.gameState.introRoad.inputEnabled=!0,this.gameState.introRoad.events.onInputDown.add(this.tapInput,this)):(this.cursors=this.game.input.keyboard.createCursorKeys(),this.leftButton=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.leftButton.onDown.add(this.arrowLeft,this),this.rightButton=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.rightButton.onDown.add(this.arrowRight,this))):this.alpha=.3,s.playerGroup.length,t.add.existing(this)}return __extends(s,a),s.prototype.update=function(){this.isPlayer&&this.x>this.gameState.goal-150&&(t.getFbInstance().setWinner(this.id),this.gameState.gameOver())},s.prototype.arrowLeft=function(){t.getStartRun()&&this.clickRate(0)},s.prototype.arrowRight=function(){t.getStartRun()&&this.clickRate(1)},s.prototype.tapInput=function(e,a){t.getStartRun()&&(void 0==this.lastTap?(this.lastTap=a.x,this.clickRate(0)):(a.x>this.lastTap?a.x-this.lastTap>80?this.clickRate(this.nextRate()):this.clickRate(this.lastRate):this.lastTap-a.x>80?this.clickRate(this.nextRate()):this.clickRate(this.lastRate),this.lastTap=a.x))},s.prototype.nextRate=function(){return 0==this.lastRate?1:0},s.prototype.clickRate=function(t){this.lastRate!=t?(this.lastRate=t,this.increaseSpeed(this.game),this.anim[e.IDLE].stop(),this.anim[e.RUNNING].next(1),this.currentState=e.RUNNING):this.lastRate==t&&this.resetSpeed()},s.prototype.resetSpeed=function(){this.playerSpeed=0,null==this.lastSpeed,this.anim[e.RUNNING].stop(),this.anim[e.IDLE].play(),this.currentState=e.IDLE},s.prototype.increaseSpeed=function(t){if(null==this.lastSpeed)this.lastSpeed=0;else{var e=this.game.time.time-this.lastSpeed;this.lastSpeed=this.game.time.time,e<99&&(this.playerSpeed=5),e<149&&e>=100&&(this.playerSpeed=4),e<199&&e>=150&&(this.playerSpeed=3),e<249&&e>=200&&(this.playerSpeed=2),e<299&&e>=250&&(this.playerSpeed=1),e>=300&&(this.playerSpeed=0),this.checkIdle(t),this.checkSpeed()}},s.prototype.checkSpeed=function(){if(0==this.playerSpeed||(1==this.playerSpeed?this.x+=12:2==this.playerSpeed?this.x+=14:3==this.playerSpeed?this.x+=16:4==this.playerSpeed?this.x+=18:5==this.playerSpeed&&(this.x+=20)),this.lastX!=this.x){this.lastX=this.x;var e={active:!0,id:this.id,name:this.name,x:this.x,y:this.y};t.getFbInstance().setUserData(this.id,e)}},s.prototype.checkIdle=function(t){void 0!=this.timer&&this.timer.destroy(),this.timer=this.game.time.create(!1),this.timer.add(150,this.resetSpeed,this),this.timer.start()},s}(Phaser.Sprite);t.Player=a}(MUR||(MUR={}));var MUR;!function(t){var e=function(){function e(){this.config=settings.fbConfig,this.fb=null,this.fb=firebase.initializeApp(this.config);var e=this.fb.database().ref("start");e.set(!1),e.on("value",function(e){t.setStartRun(e.val())});var a=this.fb.database().ref("end");a.set(!1),a.on("value",function(t){});var s=this.fb.database().ref("winner");s.set(0),s.on("value",function(e){t.setWinner(e.val())});var i=this.fb.database().ref("reset");i.set(!1),i.on("value",function(e){t.setReset(e.val())});var n=this.fb.database().ref("players");n.on("child_added",function(e){t.isGameStarted()&&t.getGameState().addPlayer(e.val())}),n.on("child_changed",function(e){t.isGameStarted()&&null!=t.getGameState()&&t.getGameState().manageData(e.val())});var r=this.fb.database().ref("logged");r.on("child_added",function(e){t.getListObj().listIsVisible()&&t.getListObj().hideUser(e.val())});var r=this.fb.database().ref("logged");r.on("child_removed",function(e){t.getListObj().listIsVisible()&&t.getListObj().showUser(e.val())})}return e.prototype.sendReset=function(){var t=this.fb.database().ref("reset");t.set(!0)},e.prototype.resetGame=function(){this.removeAllUsers();var t=this.fb.database().ref("start");t.set(!1);var e=this.fb.database().ref("end");e.set(!1);var a=this.fb.database().ref("winner");a.set(0)},e.prototype.removeAllUsers=function(){var t=this.fb.database().ref("players");t.remove()},e.prototype.removeAllWinners=function(){var t=this.fb.database().ref("winners");t.remove()},e.prototype.removeAllLogged=function(){var t=this.fb.database().ref("logged");t.remove()},e.prototype.removeUser=function(t){var e=this.fb.database().ref("players/"+t);e.remove()},e.prototype.removeLogged=function(t){var e=this.fb.database().ref("logged/"+t);e.remove()},e.prototype.logUser=function(t,e){this.fb.database().ref("/logged/"+t).set(e)},e.prototype.logout=function(t){this.removeUser(t),this.removeLogged(t)},e.prototype.setUserData=function(t,e){this.fb.database().ref("/players/"+t).set(e)},e.prototype.setWinners=function(t,e){this.fb.database().ref("/winners/"+t).set(e)},e.prototype.startGame=function(){this.fb.database().ref("/start").set(!0)},e.prototype.setWinner=function(t){this.fb.database().ref("/winner").set(t)},e.prototype.getAll=function(){var e=this.fb.database().ref("players");e.once("value",function(e){e.forEach(function(e){t.isGameStarted()&&t.getGameState().addPlayers(e.val())})})},e.prototype.getWinners=function(){var e=this.fb.database().ref("winners").orderByChild("time").limitToLast(settings.winners),a=0;e.once("value",function(e){e.forEach(function(e){a++,e.val().id==t.getPlayerId()&&(t.getGameOver().setResult(a),d)})})},e}();t.initFb=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(){function e(e,a){var s=devicePixelRatio||1;e||(e=screen.width*s),a||(a=screen.height*s),this.game=new Phaser.Game(e,a,Phaser.CANVAS,"",null,!1,!0),this.game.state.add("Boot",t.Boot,!1),this.game.state.add("Preloader",t.Preloader,!1),this.game.state.add("Menu",t.Menu,!1),this.game.state.add("MenuAbout",t.MenuAbout,!1),this.game.state.add("MenuSettings",t.MenuSettings,!1),this.game.state.add("Game",t.GameState,!1),this.game.state.add("GameOver",t.GameOver,!1),this.game.state.start("Boot")}return e}();t.initGame=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(){function e(){this.isVisible=!1,this.rsvpData=null,this.$rsvpList=$("#rsvpList"),this.$rsvpListContainer=$("#rsvpListContainer"),this.$rsvpList.css({width:window.innerWidth,height:window.innerHeight});var t;t=JSON.parse(localStorage.getItem("rsvpData")),this.loadRsvp()}return e.prototype.getrsvpData=function(){return this.rsvpData},e.prototype.getrsvpList=function(){return this.$rsvpList},e.prototype.rsvpListHide=function(){this.$rsvpList.hide()},e.prototype.rsvpListShow=function(){this.$rsvpList.show()},e.prototype.rsvpListContainerHide=function(){this.$rsvpListContainer.hide()},e.prototype.rsvpListContainerShow=function(){this.$rsvpListContainer.show()},e.prototype.listIsVisible=function(){return this.isVisible},e.prototype.hideUser=function(t){$("#member"+t.id).fadeOut()},e.prototype.showUser=function(t){$("#member"+t.id).fadeIn()},e.prototype.loadRsvp=function(){var e=this;null==this.rsvpData&&(this.rsvpData=new Array,$.ajax({type:"GET",url:settings.meetupEvent,dataType:"jsonp",success:function(a){var s,i,n,r;for(s=0;s<a.results.length;s++)i=a.results[s].member.name,n=void 0!=a.results[s].member_photo?a.results[s].member_photo.photo_link:"assets/images/game/avatar.jpg",r=a.results[s].member.member_id,e.rsvpData.push(new t.rsvp(r,i,n));localStorage.setItem("rsvpData",JSON.stringify(e.rsvpData)),e.displayRsvp()}}))},e.prototype.displayRsvp=function(){function e(e){return function(){this.isVisible=!1,t.login(e)}}var a=this,s="";this.rsvpData.forEach(function(t){s="<div id='member"+t.id+"' class='mMember'><div style='background-image:url("+t.image+");' class='mImage'></div><div class='mName'>"+t.name+"</div></div>",a.$rsvpListContainer.append(s);var i=document.getElementById("member"+t.id);i.onclick=e(t.id)}),t.showMemebers(),this.isVisible=!0,this.$rsvpList.removeClass("loading")},e}();t.initList=e}(MUR||(MUR={}));var MUR;!function(t){var e=function(){function t(t,e,a){this.id=t,this.name=e,this.image=a,this.played=!1}return t}();t.rsvp=e}(MUR||(MUR={}));var settings={fbConfig:{apiKey:"AIzaSyDhsh567YIHL1EHfBtHaWKQZt38A6TWfn8",authDomain:"firsttest-79dd5.firebaseapp.com",databaseURL:"https://firsttest-79dd5.firebaseio.com",storageBucket:""},meetupEvent:"https://api.meetup.com/2/rsvps?offset=0&format=json&event_id=234547391&photo-host=public&page=100&fields=&order=name&desc=false&sig_id=199420979&sig=88ec44e6df450a40b3ee0314dd7bf21086a23ccf&key=7c4e4e1e49637797153e102a78283f&sign=true",goalDistance:1500,playerIdStarter:-1,timer:{minute:0,second:30},winners:4,winnersAwards:["medal-gold","medal-bronze","medal-bronze","medal-bronze"]},MUR;!function(t){var e=function(e){function a(){e.call(this)}return __extends(a,e),a.prototype.preload=function(){},a.prototype.create=function(){this.menuBg=this.game.add.tileSprite(0,0,1024,600,"menu-background"),this.game.add.sprite(0,0,"menu-trasparency");var e={font:"normal 50px",fill:"#ffffff",stroke:"#000000",strokeThickness:5},a=this.game.add.text(this.game.world.centerX,75,"Settings",e);a.font="Press Start 2P",a.anchor.set(.5),this.backBtn=this.game.add.sprite(512,550,this.game.cache.getBitmapData("startBtn")),this.backBtn.anchor.setTo(.5);var s=this.game.add.text(0,0,"BACK",{fill:"#ffffff"});s.anchor.set(.5),this.backBtn.addChild(s),this.backBtn.inputEnabled=!0,this.backBtn.events.onInputDown.add(function(){t.goState("Menu",this.game)},this);var i=this.game.add.text(10,200,"Reset ALL",{fill:"#ffffff"});i.inputEnabled=!0,i.events.onInputDown.add(function(){t.getFbInstance().sendReset()},this);var n=this.game.add.text(10,240,"Reset Logged",{fill:"#ffffff"});n.inputEnabled=!0,n.events.onInputDown.add(function(){t.getFbInstance().removeAllLogged()},this);var r=this.game.add.text(10,280,"Reset Players",{fill:"#ffffff"});r.inputEnabled=!0,r.events.onInputDown.add(function(){t.getFbInstance().removeAllUsers()},this);var o=this.game.add.text(10,320,"Start Game",{fill:"#ffffff"});o.inputEnabled=!0,o.events.onInputDown.add(function(){t.getFbInstance().startGame()},this)},a.prototype.update=function(){t.isGameReset()&&t.resetAll(),this.menuBg.tilePosition.x-=.5},a}(Phaser.State);t.MenuSettings=e}(MUR||(MUR={}));